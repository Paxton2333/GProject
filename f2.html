<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Moon</title>
    <style>
        /* General Reset */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: #000000;
            color: white;
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            text-align: center;
            overflow: hidden;
        }

        img {
            width: 250px;
            height: 250px;
            cursor: pointer;
        }

        .caption {
            margin-top: 10px;
            font-size: 0.9em;
        }

        .math-box {
            display: none;
            flex-direction: column;
            align-items: center;
            margin-top: 20px;
        }

        .math-box input {
            margin: 10px 0;
            padding: 5px;
        }

        .game-canvas {
            display: none;
        }

        canvas {
            background-color: #ffffff;
            display: block;
            border: 1px solid #000000;
        }
    </style>
</head>
<body>
    <img src="moon.jpg" alt="Moon" id="moon-image">
    <p class="caption">Moon</p>

    <!-- Math Question -->
    <div class="math-box" id="math-box">
        <p id="math-question"></p>
        <input type="text" id="math-answer" placeholder="Answer here">
        <button id="submit-answer">Submit</button>
    </div>

    <!-- Play Button -->
    <button id="play-button">Play</button>

    <!-- Snake Game -->
    <div class="game-canvas">
        <canvas id="snake-game" width="800" height="600"></canvas>
    </div>

    <script>
        // References
        const image = document.getElementById('moon-image');
        const mathBox = document.getElementById('math-box');
        const mathQuestion = document.getElementById('math-question');
        const mathAnswer = document.getElementById('math-answer');
        const submitAnswer = document.getElementById('submit-answer');
        const playButton = document.getElementById('play-button');
        const gameCanvas = document.querySelector('.game-canvas');
        const canvas = document.getElementById('snake-game');
        const ctx = canvas.getContext('2d');

        let questionAnswer = null;

        // Random Math Question
        function generateMathQuestion() {
            const num1 = Math.floor(Math.random() * 10 + 1);
            const num2 = Math.floor(Math.random() * 10 + 1);
            questionAnswer = num1 + num2;
            mathQuestion.textContent = `What is ${num1} + ${num2}?`;
        }

        // Hide Image
        image.onclick = () => {
            mathBox.style.display = 'flex';
            generateMathQuestion();
        };

        // Submit Math Answer
        submitAnswer.onclick = () => {
            const userAnswer = mathAnswer.value.trim();
            if (userAnswer.toLowerCase() === 'letmein') {
                window.location.href = 'idontwanttosee.html';
            } else if (parseInt(userAnswer) === questionAnswer) {
                image.style.display = 'none';
                mathBox.style.display = 'none';
            } else {
                image.style.display = 'none';
                mathBox.style.display = 'none';
            }
        };

        // Snake Game Logic
        playButton.onclick = () => {
            document.body.style.backgroundColor = 'white';
            document.body.innerHTML = ''; // Clear the page
            gameCanvas.style.display = 'block';
            document.body.appendChild(gameCanvas);

            let snake = [{ x: 100, y: 100 }];
            let direction = { x: 10, y: 0 };
            let food = { x: getRandomPosition(canvas.width), y: getRandomPosition(canvas.height), color: getFoodColor() };
            let score = 0;

            function draw() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);

                // Draw snake
                ctx.fillStyle = 'green';
                snake.forEach(segment => ctx.fillRect(segment.x, segment.y, 10, 10));

                // Draw food
                ctx.fillStyle = food.color;
                ctx.fillRect(food.x, food.y, 10, 10);

                // Draw score
                ctx.fillStyle = 'black';
                ctx.font = '20px Arial';
                ctx.fillText(`Score: ${score}`, 10, 20);
            }

            function moveSnake() {
                const head = { x: snake[0].x + direction.x, y: snake[0].y + direction.y };
                snake.unshift(head);

                // Check if the snake eats the food
                if (head.x === food.x && head.y === food.y) {
                    if (food.color === 'black') {
                        window.location.href = 'moon.html';
                    }
                    score += 10;
                    food = { x: getRandomPosition(canvas.width), y: getRandomPosition(canvas.height), color: getFoodColor() };
                } else {
                    snake.pop();
                }
            }

            function checkCollision() {
                const head = snake[0];
                const hitWall = head.x < 0 || head.y < 0 || head.x >= canvas.width || head.y >= canvas.height;
                const hitSelf = snake.slice(1).some(segment => segment.x === head.x && segment.y === head.y);
                return hitWall || hitSelf;
            }

            function getRandomPosition(limit) {
                return Math.floor(Math.random() * (limit / 10)) * 10;
            }

            function getFoodColor() {
                const chance = Math.random();
                if (chance < 0.05) return 'black'; // Black dot (5% chance)
                if (chance < 0.45) return 'red'; // Red dot (40% chance)
                if (chance < 0.75) return 'blue'; // Blue dot (30% chance)
                return 'yellow'; // Yellow dot (25% chance)
            }

            function gameLoop() {
                if (checkCollision()) {
                    alert('Game Over! Your score: ' + score);
                    window.location.reload();
                } else {
                    moveSnake();
                    draw();
                }
            }

            // Keyboard Controls
            window.addEventListener('keydown', e => {
                if (e.key === 'ArrowUp' && direction.y === 0) direction = { x: 0, y: -10 };
                if (e.key === 'ArrowDown' && direction.y === 0) direction = { x: 0, y: 10 };
                if (e.key === 'ArrowLeft' && direction.x === 0) direction = { x: -10, y: 0 };
                if (e.key === 'ArrowRight' && direction.x === 0) direction = { x: 10, y: 0 };
            });

            setInterval(gameLoop, 100);
        };
    </script>
</body>
</html>
