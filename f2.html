<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Moon</title>
    <style>
        /* General Reset */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: #000000; /* Full dark background */
            color: white;
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            text-align: center;
        }

        img {
            width: 250px;
            height: 250px;
            cursor: pointer;
        }

        .hidden {
            display: none;
        }

        #math-form {
            margin-top: 20px;
        }

        #game-canvas {
            display: none;
            background-color: white;
            border: 1px solid black;
        }

        .shake {
            animation: shake 0.5s ease-in-out 4;
        }

        @keyframes shake {
            0%, 100% { transform: translate(0, 0); }
            25% { transform: translate(-10px, 0); }
            50% { transform: translate(10px, 0); }
            75% { transform: translate(-10px, 0); }
        }
    </style>
</head>
<body>
    <img src="moon.jpg" alt="Moon" id="moon-image">
    <p class="caption">Moon</p>

    <form id="math-form" class="hidden">
        <label for="answer">Solve: <span id="math-question"></span></label><br>
        <input type="text" id="answer">
        <button type="submit">Submit</button>
    </form>

    <button id="play-button" class="hidden">Play</button>

    <canvas id="game-canvas" width="500" height="500"></canvas>

    <script>
        const moonImage = document.getElementById('moon-image');
        const mathForm = document.getElementById('math-form');
        const mathQuestion = document.getElementById('math-question');
        const answerInput = document.getElementById('answer');
        const playButton = document.getElementById('play-button');
        const canvas = document.getElementById('game-canvas');
        const ctx = canvas.getContext('2d');

        let randomMath = {
            num1: Math.floor(Math.random() * 10) + 1,
            num2: Math.floor(Math.random() * 10) + 1,
        };

        mathQuestion.textContent = `${randomMath.num1} + ${randomMath.num2}`;

        moonImage.addEventListener('click', () => {
            moonImage.classList.add('hidden');
            mathForm.classList.remove('hidden');
        });

        mathForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const answer = answerInput.value.trim();

            if (answer === 'letmein') {
                window.location.href = 'idontwanttosee.html';
            } else if (parseInt(answer) === randomMath.num1 + randomMath.num2) {
                mathForm.classList.add('hidden');
                playButton.classList.remove('hidden');
            } else {
                moonImage.classList.remove('hidden');
                mathForm.classList.add('hidden');
            }
        });

        // Snake Game Implementation
        playButton.addEventListener('click', () => {
            document.body.style.backgroundColor = 'white';
            document.body.innerHTML = ''; // Clear all
            canvas.style.display = 'block';
            document.body.appendChild(canvas);

            let snake = [{ x: 250, y: 250 }];
            let direction = { x: 0, y: -10 };
            let food = generateFood();
            let score = 0;
            let speed = 100;
            let isGameOver = false;

            function draw() {
                if (isGameOver) return;
                ctx.clearRect(0, 0, canvas.width, canvas.height);

                // Draw snake
                snake.forEach(segment => {
                    ctx.fillStyle = 'green';
                    ctx.fillRect(segment.x, segment.y, 10, 10);
                });

                // Draw food
                ctx.fillStyle = food.color;
                ctx.fillRect(food.x, food.y, 10, 10);

                // Draw score
                ctx.fillStyle = 'black';
                ctx.font = '16px Arial';
                ctx.fillText(`Score: ${score}`, 10, 20);
            }

            function update() {
                if (isGameOver) return;

                // Move snake
                const head = { x: snake[0].x + direction.x, y: snake[0].y + direction.y };
                snake.unshift(head);

                // Check collision with food
                if (head.x === food.x && head.y === food.y) {
                    score += food.value;
                    food = generateFood();
                    if (food.color === 'black') {
                        document.body.classList.add('shake');
                        setTimeout(() => {
                            window.location.href = 'moon.html';
                        }, 2000);
                    }
                } else {
                    snake.pop();
                }

                // Check collision with wall
                if (head.x < 0 || head.x >= canvas.width || head.y < 0 || head.y >= canvas.height) {
                    isGameOver = true;
                }

                // Check collision with self
                for (let i = 1; i < snake.length; i++) {
                    if (head.x === snake[i].x && head.y === snake[i].y) {
                        isGameOver = true;
                    }
                }
            }

            function gameLoop() {
                update();
                draw();
                if (!isGameOver) {
                    setTimeout(gameLoop, speed);
                }
            }

            function generateFood() {
                const x = Math.floor(Math.random() * (canvas.width / 10)) * 10;
                const y = Math.floor(Math.random() * (canvas.height / 10)) * 10;
                const colors = ['red', 'blue', 'yellow', 'black'];
                const color = colors[Math.floor(Math.random() * colors.length)];
                return { x, y, color, value: color === 'black' ? 0 : 10 };
            }

            document.addEventListener('keydown', (e) => {
                if (e.key === 'ArrowUp' && direction.y === 0) direction = { x: 0, y: -10 };
                if (e.key === 'ArrowDown' && direction.y === 0) direction = { x: 0, y: 10 };
                if (e.key === 'ArrowLeft' && direction.x === 0) direction = { x: -10, y: 0 };
                if (e.key === 'ArrowRight' && direction.x === 0) direction = { x: 10, y: 0 };
                if (e.key === ' ') speed = 50; // Speed up
            });

            document.addEventListener('keyup', (e) => {
                if (e.key === ' ') speed = 100; // Reset speed
            });

            gameLoop();
        });
    </script>
</body>
</html>
